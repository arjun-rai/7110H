#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
81.736,-137.567,120,0
81.233,-135.631,120
80.737,-133.693,120
80.246,-131.754,120
79.762,-129.814,120
79.284,-127.872,120
78.813,-125.928,120
78.349,-123.983,120
77.892,-122.036,120
77.441,-120.087,120
76.998,-118.137,120
76.563,-116.185,120
76.135,-114.231,120
75.715,-112.276,120
75.304,-110.318,120
74.9,-108.36,120
74.504,-106.399,120
74.118,-104.437,120
73.74,-102.473,120
73.371,-100.507,120
73.011,-98.54,120
72.66,-96.571,120
72.319,-94.6,120
71.987,-92.628,120
71.665,-90.654,120
71.353,-88.679,120
71.051,-86.701,120
70.759,-84.723,120
70.478,-82.743,120
70.207,-80.761,120
69.946,-78.778,120
69.696,-76.794,120
69.457,-74.808,120
69.227,-72.822,120
69.01,-70.833,120
68.802,-68.844,120
68.605,-66.854,120
68.419,-64.863,120
68.244,-62.87,120
68.078,-60.877,120
67.923,-58.883,120
67.777,-56.889,120
67.642,-54.893,120
67.516,-52.897,120
67.399,-50.901,120
67.291,-48.903,120
67.191,-46.906,120
67.099,-44.908,120
67.016,-42.91,120
66.939,-40.911,120
66.869,-38.913,120
66.805,-36.914,120
66.746,-34.914,120
66.693,-32.915,120
66.644,-30.916,120
66.599,-28.916,120
66.557,-26.917,120
66.518,-24.917,120
66.481,-22.917,120
66.446,-20.918,120
66.411,-18.918,120
66.377,-16.918,120
66.343,-14.919,120
66.32,-13.601,120,0
66.32,-13.601,0,0
#PATH-POINTS-START Path
59.897,-12.959,120,0
60.202,-14.936,120
60.515,-16.911,120
60.836,-18.885,120
61.165,-20.858,120
61.503,-22.829,120
61.851,-24.798,120
62.21,-26.766,120
62.579,-28.732,120
62.96,-30.695,120
63.353,-32.656,120
63.759,-34.614,120
64.179,-36.57,120
64.614,-38.522,120
65.066,-40.47,120
65.534,-42.414,120
66.021,-44.354,120
66.529,-46.289,120
67.058,-48.217,120
67.612,-50.139,120
68.191,-52.054,120
68.798,-53.959,120
69.436,-55.855,120
70.109,-57.738,120
70.819,-59.608,120
71.57,-61.461,120
72.365,-63.297,120
73.208,-65.11,120
74.104,-66.898,120
75.056,-68.657,120
76.066,-70.383,120
77.135,-72.073,120
78.261,-73.726,120
79.438,-75.343,120
80.657,-76.928,120
81.904,-78.492,120
83.162,-80.047,120
84.411,-81.609,120
85.632,-83.193,120
86.809,-84.809,120
88.159,-86.824,120,0
88.159,-86.824,0,0
#PATH-POINTS-START Path
89.443,-85.54,120,0
90.956,-86.848,120
92.441,-88.188,120
93.896,-89.56,120
95.32,-90.964,120
96.713,-92.4,120
98.071,-93.867,120
99.393,-95.368,120
100.678,-96.901,120
101.921,-98.467,120
103.12,-100.068,120
104.271,-101.703,120
105.37,-103.374,120
106.413,-105.081,120
107.39,-106.826,120
108.298,-108.607,120
109.126,-110.428,120
109.867,-112.285,120
110.502,-114.181,120
111.023,-116.112,120
111.411,-118.073,120
111.646,-120.059,120
111.706,-122.057,120
111.57,-124.051,120
111.217,-126.019,120
110.638,-127.932,120
109.828,-129.759,120
108.798,-131.471,120
107.57,-133.048,120
106.171,-134.476,120
104.635,-135.755,120
102.989,-136.891,120
101.255,-137.886,120
99.457,-138.761,120
97.609,-139.524,120
95.721,-140.185,120
93.805,-140.756,120
91.866,-141.247,120
89.91,-141.663,120
87.941,-142.014,120
85.963,-142.308,120
83.977,-142.547,120
82.378,-142.705,120,0
82.378,-142.705,0,0
#PATH-POINTS-START Path
19.432,-149.128,120,0
21.415,-148.873,120
23.4,-148.628,120
25.386,-148.391,120
27.373,-148.161,120
29.361,-147.938,120
31.349,-147.721,120
33.337,-147.508,120
35.326,-147.3,120
37.316,-147.093,120
39.305,-146.889,120
41.295,-146.685,120
43.284,-146.48,120
45.274,-146.274,120
47.263,-146.065,120
49.251,-145.852,120
51.239,-145.633,120
53.227,-145.408,120
55.213,-145.176,120
57.198,-144.933,120
59.182,-144.681,120
61.165,-144.415,120
63.145,-144.136,120
65.123,-143.84,120
67.098,-143.528,120
69.071,-143.196,120
71.039,-142.842,120
73.003,-142.466,120
74.963,-142.064,120
76.916,-141.633,120
78.862,-141.173,120
80.8,-140.679,120
82.729,-140.15,120
84.646,-139.582,120
86.551,-138.973,120
88.442,-138.32,120
90.315,-137.62,120
92.169,-136.869,120
94,-136.065,120
95.805,-135.204,120
97.582,-134.286,120
99.325,-133.307,120
101.031,-132.263,120
102.696,-131.154,120
104.315,-129.981,120
105.885,-128.742,120
107.398,-127.434,120
108.853,-126.063,120
110.247,-124.629,120
111.577,-123.135,120
112.836,-121.582,120
113.851,-120.224,120,0
113.851,-120.224,0,0
#PATH-POINTS-START Path
111.924,-120.867,120,0
113.312,-119.427,120
114.697,-117.984,120
116.078,-116.537,120
117.454,-115.086,120
118.823,-113.628,120
120.183,-112.162,120
121.533,-110.686,120
122.871,-109.199,120
124.193,-107.699,120
125.498,-106.183,120
126.782,-104.65,120
128.043,-103.097,120
129.276,-101.523,120
130.479,-99.925,120
131.647,-98.301,120
132.778,-96.652,120
133.866,-94.974,120
134.911,-93.268,120
135.908,-91.535,120
136.856,-89.774,120
137.755,-87.987,120
138.601,-86.175,120
139.397,-84.341,120
140.143,-82.485,120
140.84,-80.61,120
141.491,-78.719,120
142.097,-76.813,120
142.661,-74.895,120
143.187,-72.965,120
143.675,-71.026,120
144.039,-69.482,120,0
144.039,-69.482,0,0)";


std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {125, 150, 0, 140, 150};
std::vector<double> startSpeed = {200,200, 150, 130, 140};
//

