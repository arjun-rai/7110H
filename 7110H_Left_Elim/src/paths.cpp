#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
-76.393,-140.053,120,0
-76.368,-138.054,120
-76.346,-136.054,120
-76.326,-134.054,120
-76.31,-132.054,120
-76.297,-130.054,120
-76.288,-128.054,120
-76.283,-126.054,120
-76.282,-124.054,120
-76.284,-122.054,120
-76.292,-120.054,120
-76.304,-118.054,120
-76.321,-116.054,120
-76.343,-114.054,120
-76.371,-112.054,120
-76.406,-110.055,120
-76.446,-108.055,120
-76.495,-106.056,120
-76.551,-104.056,120
-76.614,-102.057,120
-76.687,-100.059,120
-76.77,-98.06,120
-76.862,-96.063,120
-76.966,-94.065,120
-77.081,-92.069,120
-77.207,-90.073,120
-77.343,-88.077,120
-77.484,-86.082,120
-77.621,-84.087,120
-77.735,-82.09,120
-77.795,-80.091,120
-77.769,-78.092,120
-77.641,-76.096,120
-77.422,-74.108,120
-77.136,-72.129,120
-76.806,-70.156,120
-76.446,-68.189,120
-76.067,-66.225,120
-75.675,-64.264,120
-75.274,-62.304,120
-74.868,-60.346,120
-74.459,-58.389,120
-74.046,-56.431,120
-73.632,-54.475,120
-73.217,-52.518,120
-72.802,-50.562,120
-72.387,-48.605,120
-71.972,-46.649,120
-71.557,-44.693,120
-71.143,-42.736,120
-70.729,-40.779,120
-70.316,-38.822,120
-69.904,-36.865,120
-69.493,-34.908,120
-69.082,-32.95,120
-68.673,-30.993,120
-68.264,-29.035,120
-67.856,-27.077,120
-67.449,-25.119,120
-67.043,-23.161,120
-66.638,-21.202,120
-66.233,-19.243,120
-65.83,-17.285,120
-65.213,-14.285,120,0
-65.213,-14.285,0,0
#PATH-POINTS-START Path
-64.592,-13.664,120,0
-64.984,-15.625,120
-65.39,-17.583,120
-65.811,-19.539,120
-66.246,-21.491,120
-66.697,-23.439,120
-67.165,-25.384,120
-67.649,-27.324,120
-68.15,-29.26,120
-68.669,-31.192,120
-69.209,-33.117,120
-69.769,-35.038,120
-70.348,-36.952,120
-70.948,-38.86,120
-71.572,-40.76,120
-72.218,-42.653,120
-72.887,-44.537,120
-73.583,-46.412,120
-74.304,-48.278,120
-75.051,-50.133,120
-75.827,-51.976,120
-76.629,-53.809,120
-77.463,-55.626,120
-78.325,-57.431,120
-79.221,-59.219,120
-80.147,-60.992,120
-81.105,-62.747,120
-82.098,-64.483,120
-83.122,-66.201,120
-84.182,-67.897,120
-85.276,-69.571,120
-86.403,-71.223,120
-87.565,-72.851,120
-88.762,-74.454,120
-89.992,-76.031,120
-91.254,-77.582,120
-92.548,-79.106,120
-93.874,-80.604,120
-95.23,-82.074,120
-96.615,-83.517,120
-98.027,-84.933,120
-99.465,-86.323,120
-100.927,-87.688,120
-102.411,-89.028,120
-103.917,-90.345,120
-105.441,-91.639,120
-106.983,-92.913,120
-108.541,-94.167,120
-110.114,-95.403,120
-111.699,-96.623,120
-113.294,-97.828,120
-114.9,-99.021,120
-116.513,-100.203,120
-118.133,-101.376,120
-119.759,-102.541,120
-121.388,-103.7,120
-123.021,-104.855,120
-124.656,-106.008,120
-126.292,-107.159,120
-127.927,-108.31,120
-129.562,-109.462,120
-131.194,-110.617,120
-132.824,-111.776,120
-134.153,-112.726,120,17.6
-134.153,-112.726,0,17.6
#PATH-POINTS-START Path
-133.532,-110.863,120,0
-132.826,-112.734,120
-132.105,-114.599,120
-131.368,-116.459,120
-130.615,-118.311,120
-129.844,-120.157,120
-129.055,-121.995,120
-128.246,-123.824,120
-127.417,-125.644,120
-126.566,-127.454,120
-125.693,-129.253,120
-124.795,-131.04,120
-123.872,-132.814,120
-122.923,-134.575,120
-121.946,-136.32,120
-120.94,-138.048,120
-119.902,-139.758,120
-118.829,-141.445,120
-117.721,-143.11,120
-116.577,-144.751,120
-115.39,-146.36,120
-114.162,-147.939,120
-112.889,-149.481,120
-111.568,-150.983,120
-110.196,-152.438,120
-108.773,-153.843,120
-107.293,-155.188,120
-105.755,-156.466,120
-104.159,-157.67,120
-102.503,-158.791,120
-100.787,-159.819,120
-99.015,-160.744,120
-97.189,-161.559,120
-95.313,-162.252,120
-93.395,-162.816,120
-91.443,-163.253,120
-89.467,-163.553,120
-87.474,-163.726,120
-85.475,-163.769,120
-83.477,-163.695,120
-81.486,-163.508,120
-79.507,-163.221,120
-77.543,-162.846,120
-75.595,-162.39,120
-73.665,-161.869,120
-71.75,-161.292,120
-69.848,-160.672,120
-67.958,-160.019,120
-66.073,-159.349,120
-64.19,-158.675,120
-62.302,-158.015,120
-60.402,-157.391,120
-58.481,-156.835,120
-57.139,-156.512,120,13.899999999999999
-57.139,-156.512,0,13.899999999999999
#PATH-POINTS-START Path
-55.897,-156.512,120,0
-53.918,-156.226,120
-51.936,-155.957,120
-49.952,-155.701,120
-47.967,-155.457,120
-45.981,-155.222,120
-43.994,-154.996,120
-42.006,-154.777,120
-40.017,-154.566,120
-38.028,-154.361,120
-36.038,-154.163,120
-34.047,-153.971,120
-32.055,-153.786,120
-30.063,-153.607,120
-28.071,-153.435,120
-26.078,-153.269,120
-24.084,-153.111,120
-22.09,-152.961,120
-20.095,-152.819,120
-18.099,-152.686,120
-16.103,-152.563,120
-14.106,-152.452,120
-12.108,-152.353,120
-10.11,-152.271,120
-8.111,-152.208,120
-6.111,-152.171,120
-4.969,-152.164,120,0
-4.969,-152.164,0,0
#PATH-POINTS-START Path
-4.969,-153.096,120,0
-6.938,-153.447,120
-8.904,-153.813,120
-10.867,-154.196,120
-12.827,-154.592,120
-14.785,-155.002,120
-16.74,-155.424,120
-18.692,-155.857,120
-20.643,-156.298,120
-22.592,-156.747,120
-24.54,-157.201,120
-26.487,-157.658,120
-28.433,-158.117,120
-30.38,-158.575,120
-32.328,-159.028,120
-34.278,-159.476,120
-36.229,-159.914,120
-38.183,-160.34,120
-40.14,-160.751,120
-42.102,-161.143,120
-44.067,-161.514,120
-46.037,-161.859,120
-48.012,-162.174,120
-49.992,-162.458,120
-51.976,-162.706,120
-53.965,-162.916,120
-55.958,-163.081,120
-57.954,-163.201,120
-59.953,-163.273,120
-61.953,-163.296,120
-63.953,-163.267,120
-65.951,-163.181,120
-67.946,-163.04,120
-69.936,-162.846,120
-71.92,-162.596,120
-73.896,-162.288,120
-75.864,-161.928,120
-77.821,-161.516,120
-79.765,-161.049,120
-81.698,-160.535,120
-83.616,-159.969,120
-85.521,-159.361,120
-87.411,-158.705,120
-89.287,-158.012,120
-91.146,-157.274,120
-92.99,-156.502,120
-94.82,-155.693,120
-96.633,-154.85,120
-98.432,-153.977,120
-100.217,-153.074,120
-101.986,-152.141,120
-103.741,-151.182,120
-105.483,-150.199,120
-107.212,-149.193,120
-108.927,-148.166,120
-110.629,-147.116,120
-112.319,-146.046,120
-113.997,-144.958,120
-115.664,-143.852,120
-117.319,-142.73,120
-118.964,-141.592,120
-120.599,-140.44,120
-122.223,-139.273,120
-123.838,-138.094,120
-125.444,-136.901,120
-127.041,-135.697,120
-128.629,-134.481,120
-130.207,-133.253,120
-131.778,-132.015,120
-134.153,-130.116,120,0
-134.153,-130.116,0,0)";

std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {300, 0, 300, 0, 0};
std::vector<double> startSpeed = {600, 600, 600, 300, 400};
//