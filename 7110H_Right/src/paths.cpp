#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
29.444,-150.048,120,0
31.444,-150.053,120
33.444,-150.066,120
35.444,-150.085,120
37.444,-150.106,120
39.444,-150.127,120
41.444,-150.145,120
43.444,-150.159,120
45.444,-150.165,120
47.444,-150.162,120
49.443,-150.147,120
51.443,-150.119,120
53.443,-150.074,120
55.442,-150.011,120
57.44,-149.928,120
59.437,-149.823,120
61.433,-149.693,120
63.427,-149.537,120
65.418,-149.353,120
67.407,-149.138,120
69.391,-148.89,120
71.372,-148.609,120
73.346,-148.293,120
75.315,-147.938,120
77.275,-147.544,120
79.227,-147.109,120
81.17,-146.633,120
83.101,-146.112,120
85.019,-145.547,120
86.924,-144.936,120
88.813,-144.279,120
90.684,-143.574,120
92.537,-142.822,120
94.37,-142.022,120
96.181,-141.174,120
97.97,-140.279,120
99.311,-139.568,120,0
99.311,-139.568,0,0
#PATH-POINTS-START Path
98.313,-140.566,120,0
99.916,-139.37,120
101.508,-138.159,120
103.087,-136.932,120
104.652,-135.686,120
106.2,-134.42,120
107.728,-133.13,120
109.235,-131.815,120
110.716,-130.471,120
112.17,-129.098,120
113.591,-127.691,120
114.978,-126.25,120
116.325,-124.771,120
117.629,-123.255,120
118.885,-121.699,120
120.089,-120.102,120
121.239,-118.466,120
122.329,-116.789,120
123.357,-115.074,120
124.322,-113.322,120
125.219,-111.534,120
126.051,-109.716,120
126.814,-107.867,120
127.511,-105.993,120
128.142,-104.095,120
128.711,-102.178,120
129.217,-100.243,120
129.664,-98.294,120
130.056,-96.333,120
130.393,-94.361,120
130.681,-92.382,120
130.921,-90.397,120
131.117,-88.406,120
131.272,-86.412,120
131.388,-84.416,120
131.468,-82.417,120
131.514,-80.418,120
131.528,-78.418,120
131.513,-76.418,120
131.469,-74.419,120
131.401,-72.42,120
131.309,-70.422,120
131.193,-68.425,120
131.057,-66.43,120
130.9,-64.436,120
130.751,-62.714,120,0
130.751,-62.714,0,0
#PATH-POINTS-START Path
19.962,-81.179,120,0
20.481,-79.248,120
21.011,-77.319,120
21.553,-75.394,120
22.105,-73.472,120
22.669,-71.553,120
23.245,-69.637,120
23.832,-67.725,120
24.43,-65.817,120
25.041,-63.913,120
25.664,-62.012,120
26.3,-60.116,120
26.948,-58.224,120
27.608,-56.336,120
28.283,-54.453,120
28.97,-52.575,120
29.672,-50.702,120
30.387,-48.835,120
31.118,-46.973,120
31.863,-45.117,120
32.624,-43.267,120
33.401,-41.424,120
34.195,-39.589,120
35.006,-37.761,120
35.835,-35.941,120
36.684,-34.129,120
37.551,-32.327,120
38.439,-30.535,120
39.349,-28.754,120
40.281,-26.985,120
41.237,-25.228,120
42.218,-23.485,120
43.225,-21.757,120
44.26,-20.046,120
45.326,-18.354,120
46.422,-16.681,120
47.553,-15.032,120
48.72,-13.407,120
49.925,-11.811,120
51.173,-10.248,120
52.465,-8.721,120
53.805,-7.237,120
55.197,-5.801,120
56.645,-4.422,120
58.183,-3.151,120,0
59.917,-2.154,120
61.689,-1.228,120
63.499,-0.377,120
65.342,0.399,120
67.216,1.098,120
69.117,1.72,120
71.041,2.264,120
72.985,2.732,120
74.946,3.123,120
76.921,3.442,120
78.905,3.69,120
80.897,3.869,120
82.894,3.983,120
84.893,4.035,120
86.893,4.028,120
88.892,3.966,120
90.889,3.852,120
92.882,3.689,120
94.871,3.482,120
96.855,3.233,120
98.834,2.944,120
100.808,2.62,120
102.776,2.263,120
104.738,1.876,120
106.694,1.46,120
108.645,1.02,120
110.591,0.557,120
112.531,0.072,120
114.467,-0.431,120
116.398,-0.95,120
117.776,-1.331,120,0
117.776,-1.331,0,0)";
std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {50, 100, 0};
std::vector<double> startSpeed = {300,75, 100};
//

