#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
29.444,-150.048,120,0
31.444,-150.039,120
33.444,-150.013,120
35.443,-149.967,120
37.442,-149.902,120
39.44,-149.817,120
41.438,-149.711,120
43.433,-149.583,120
45.428,-149.433,120
47.42,-149.259,120
49.411,-149.062,120
51.398,-148.841,120
53.383,-148.594,120
55.364,-148.323,120
57.342,-148.024,120
59.315,-147.7,120
61.284,-147.348,120
63.248,-146.967,120
65.206,-146.559,120
67.157,-146.122,120
69.102,-145.657,120
71.04,-145.162,120
72.97,-144.636,120
74.891,-144.081,120
76.804,-143.496,120
78.706,-142.88,120
80.599,-142.233,120
82.481,-141.555,120
84.351,-140.848,120
86.209,-140.108,120
88.055,-139.338,120
89.888,-138.538,120
91.707,-137.706,120
93.511,-136.844,120
95.301,-135.952,120
97.076,-135.029,120
98.131,-134.464,120,0
98.131,-134.464,0,0
#PATH-POINTS-START Path
97.509,-134.464,120,0
99.132,-133.294,120
100.734,-132.097,120
102.311,-130.868,120
103.86,-129.602,120
105.373,-128.294,120
106.846,-126.941,120
108.271,-125.538,120
109.642,-124.082,120
110.953,-122.572,120
112.198,-121.007,120
113.375,-119.39,120
114.482,-117.725,120
115.518,-116.014,120
116.488,-114.265,120
117.395,-112.483,120
118.242,-110.671,120
119.036,-108.836,120
119.783,-106.981,120
120.488,-105.109,120
121.156,-103.224,120
121.791,-101.327,120
122.398,-99.422,120
122.98,-97.508,120
123.542,-95.589,120
124.085,-93.664,120
124.612,-91.735,120
125.126,-89.802,120
125.628,-87.866,120
126.119,-85.927,120
126.602,-83.986,120
127.078,-82.044,120
127.548,-80.1,120
128.012,-78.154,120
128.472,-76.208,120
128.928,-74.261,120
129.38,-72.312,120
129.753,-70.699,120,0
129.753,-70.699,0,0
#PATH-POINTS-START Path
96.888,-23.29,120,0
95.008,-23.973,120
93.135,-24.673,120
91.269,-25.393,120
89.411,-26.133,120
87.56,-26.891,120
85.718,-27.669,120
83.883,-28.465,120
82.056,-29.279,120
80.238,-30.113,120
78.429,-30.964,120
76.628,-31.835,120
74.836,-32.723,120
73.053,-33.629,120
71.281,-34.556,120
69.517,-35.499,120
67.764,-36.461,120
66.021,-37.442,120
64.288,-38.441,120
62.568,-39.46,120
60.857,-40.497,120
59.16,-41.554,120
57.473,-42.63,120
55.801,-43.726,120
54.141,-44.842,120
52.495,-45.978,120
50.863,-47.134,120
49.247,-48.312,120
47.646,-49.511,120
46.063,-50.733,120
44.496,-51.976,120
42.949,-53.244,120
41.42,-54.533,120
39.914,-55.849,120
38.429,-57.188,120
36.967,-58.553,120
35.532,-59.946,120
34.123,-61.366,120
32.743,-62.814,120
31.397,-64.292,120
30.085,-65.802,120
28.809,-67.342,120
27.574,-68.915,120
26.384,-70.523,120
25.244,-72.165,120
24.159,-73.845,120
23.134,-75.563,120
22.176,-77.318,120
21.294,-79.113,120
20.497,-80.947,120
19.792,-82.819,120
19.192,-84.726,120
18.707,-86.666,120
18.355,-88.634,120
18.142,-90.622,120
18.083,-92.621,120
18.189,-94.617,120
18.462,-96.598,120
18.911,-98.546,120
19.253,-99.683,120,0
19.253,-99.683,0,0)";
std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {50, 100, 0};
std::vector<double> startSpeed = {200,75,200};
//

