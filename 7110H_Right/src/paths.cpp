#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
29.444,-150.048,120,0
31.444,-150.039,120
33.444,-150.013,120
35.443,-149.967,120
37.442,-149.902,120
39.44,-149.817,120
41.438,-149.711,120
43.433,-149.583,120
45.428,-149.433,120
47.42,-149.259,120
49.411,-149.062,120
51.398,-148.841,120
53.383,-148.594,120
55.364,-148.323,120
57.342,-148.024,120
59.315,-147.7,120
61.284,-147.348,120
63.248,-146.967,120
65.206,-146.559,120
67.157,-146.122,120
69.102,-145.657,120
71.04,-145.162,120
72.97,-144.636,120
74.891,-144.081,120
76.804,-143.496,120
78.706,-142.88,120
80.599,-142.233,120
82.481,-141.555,120
84.351,-140.848,120
86.209,-140.108,120
88.055,-139.338,120
89.888,-138.538,120
91.707,-137.706,120
93.511,-136.844,120
95.301,-135.952,120
97.076,-135.029,120
98.131,-134.464,120,0
98.131,-134.464,0,0
#PATH-POINTS-START Path
97.509,-134.464,120,0
99.132,-133.294,120
100.734,-132.097,120
102.311,-130.868,120
103.86,-129.602,120
105.373,-128.294,120
106.846,-126.941,120
108.271,-125.538,120
109.642,-124.082,120
110.953,-122.572,120
112.198,-121.007,120
113.375,-119.39,120
114.482,-117.725,120
115.518,-116.014,120
116.488,-114.265,120
117.395,-112.483,120
118.242,-110.671,120
119.036,-108.836,120
119.783,-106.981,120
120.488,-105.109,120
121.156,-103.224,120
121.791,-101.327,120
122.398,-99.422,120
122.98,-97.508,120
123.542,-95.589,120
124.085,-93.664,120
124.612,-91.735,120
125.126,-89.802,120
125.628,-87.866,120
126.119,-85.927,120
126.602,-83.986,120
127.078,-82.044,120
127.548,-80.1,120
128.012,-78.154,120
128.472,-76.208,120
128.928,-74.261,120
129.38,-72.312,120
129.753,-70.699,120,0
129.753,-70.699,0,0
#PATH-POINTS-START Path
96.888,-23.29,120,0
95.002,-23.954,120
93.111,-24.607,120
91.217,-25.247,120
89.318,-25.877,120
87.417,-26.499,120
85.513,-27.111,120
83.607,-27.717,120
81.699,-28.317,120
79.79,-28.912,120
77.88,-29.505,120
75.969,-30.096,120
74.058,-30.686,120
72.148,-31.279,120
70.239,-31.874,120
68.331,-32.475,120
66.426,-33.083,120
64.523,-33.699,120
62.624,-34.327,120
60.73,-34.969,120
58.841,-35.625,120
56.959,-36.302,120
55.084,-36.999,120
53.218,-37.719,120
51.364,-38.467,120
49.522,-39.246,120
47.694,-40.058,120
45.883,-40.907,120
44.092,-41.797,120
42.324,-42.732,120
40.583,-43.716,120
38.872,-44.751,120
37.195,-45.841,120
35.558,-46.99,120
33.966,-48.2,120
32.424,-49.473,120
30.938,-50.811,120
29.513,-52.214,120
28.155,-53.682,120
26.869,-55.214,120
25.659,-56.807,120
24.53,-58.457,120
23.481,-60.16,120
22.516,-61.911,120
21.632,-63.705,120
20.83,-65.536,120
20.108,-67.401,120
19.466,-69.295,120
18.896,-71.212,120
18.397,-73.149,120
17.968,-75.102,120
17.599,-77.068,120
17.295,-79.045,120
17.043,-81.028,120
16.847,-83.019,120
16.699,-85.013,120
16.595,-87.01,120
16.54,-89.01,120
16.522,-91.009,120
16.542,-93.009,120
16.596,-95.009,120
16.769,-98.441,120,0
16.769,-98.441,0,0)";
std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {50, 100, 0};
std::vector<double> startSpeed = {200,75,200};
//

