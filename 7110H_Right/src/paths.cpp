#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
1.497,-150.148,120,0
3.497,-150.11,120
5.496,-150.072,120
7.496,-150.033,120
9.496,-149.992,120
11.495,-149.951,120
13.495,-149.908,120
15.494,-149.863,120
17.494,-149.817,120
19.493,-149.77,120
21.493,-149.721,120
23.492,-149.671,120
25.491,-149.619,120
27.491,-149.565,120
29.49,-149.509,120
31.489,-149.451,120
33.488,-149.392,120
35.487,-149.329,120
37.486,-149.265,120
39.485,-149.198,120
41.484,-149.129,120
43.482,-149.056,120
45.481,-148.981,120
47.479,-148.902,120
49.478,-148.82,120
51.476,-148.735,120
53.474,-148.646,120
55.472,-148.552,120
57.469,-148.455,120
59.467,-148.352,120
61.464,-148.245,120
63.461,-148.132,120
65.457,-148.013,120
67.453,-147.887,120
69.449,-147.755,120
71.444,-147.616,120
73.438,-147.468,120
75.432,-147.31,120
77.425,-147.143,120
79.417,-146.966,120
81.408,-146.776,120
83.398,-146.573,120
85.386,-146.354,120
87.372,-146.12,120
89.356,-145.866,120
91.337,-145.592,120
93.315,-145.295,120
95.288,-144.97,120
97.256,-144.614,120
99.218,-144.224,120
101.171,-143.791,120
103.112,-143.313,120
105.041,-142.782,120
106.95,-142.189,120
108.838,-141.527,120
110.696,-140.789,120
112.52,-139.969,120
114.304,-139.066,120
116.044,-138.079,120
117.74,-137.02,120
119.397,-135.9,120
121.023,-134.735,120
122.629,-133.543,120
124.225,-132.337,120
125.82,-131.131,120
127.422,-129.935,120,0
128.761,-128.462,120
130.026,-126.913,120
131.286,-125.36,120
132.54,-123.802,120
133.784,-122.235,120
135.015,-120.659,120
136.228,-119.07,120
137.421,-117.464,120
138.587,-115.84,120
139.721,-114.192,120
140.815,-112.517,120
141.861,-110.813,120
142.853,-109.077,120
143.782,-107.306,120
144.643,-105.5,120
145.429,-103.662,120
146.137,-101.791,120
146.767,-99.893,120
147.319,-97.971,120
147.798,-96.029,120
148.208,-94.072,120
148.554,-92.102,120
148.843,-90.123,120
149.082,-88.138,120
149.275,-86.147,120
149.428,-84.153,120
149.547,-82.157,120
149.635,-80.158,120
149.696,-78.159,120
149.715,-77.286,120,0
149.715,-77.286,0,0)";
std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {0};
std::vector<double> startSpeed = {300};
//

