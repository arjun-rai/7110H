#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
0,-152.81,120,0
2,-152.854,120
3.999,-152.893,120
5.999,-152.928,120
7.999,-152.958,120
9.998,-152.983,120
11.998,-153.002,120
13.998,-153.015,120
15.998,-153.022,120
17.998,-153.024,120
19.998,-153.019,120
21.998,-153.008,120
23.998,-152.991,120
25.998,-152.967,120
27.998,-152.935,120
29.997,-152.895,120
31.997,-152.848,120
33.996,-152.794,120
35.995,-152.731,120
37.994,-152.659,120
39.992,-152.579,120
41.99,-152.489,120
43.988,-152.39,120
45.985,-152.281,120
47.981,-152.161,120
49.977,-152.031,120
51.972,-151.889,120
53.966,-151.734,120
55.959,-151.568,120
57.951,-151.388,120
59.941,-151.195,120
61.931,-150.988,120
63.918,-150.766,120
65.904,-150.528,120
67.888,-150.273,120
69.869,-150.001,120
71.848,-149.712,120
73.824,-149.402,120
75.797,-149.072,120
77.766,-148.722,120
79.73,-148.347,120
81.691,-147.951,120
83.645,-147.527,120
85.594,-147.079,120
87.536,-146.6,120
89.471,-146.093,120
91.396,-145.553,120
93.312,-144.979,120
95.217,-144.371,120
97.11,-143.725,120
98.988,-143.038,120
100.85,-142.308,120
102.695,-141.534,120
104.518,-140.713,120
106.318,-139.842,120
108.093,-138.919,120
109.838,-137.943,120
111.551,-136.91,120
113.226,-135.819,120
114.862,-134.667,120
116.454,-133.457,120
117.997,-132.185,120
119.489,-130.853,120
120.927,-129.463,120
122.305,-128.014,120
123.625,-126.512,120
124.882,-124.957,120
126.079,-123.354,120
127.213,-121.707,120
127.757,-120.87,120,0
127.757,-120.87,0,0
#PATH-POINTS-START Path
127.757,-120.039,120,0
128.946,-118.43,120
130.112,-116.806,120
131.257,-115.165,120
132.377,-113.509,120
133.472,-111.835,120
134.541,-110.145,120
135.585,-108.439,120
136.601,-106.716,120
137.588,-104.977,120
138.546,-103.221,120
139.474,-101.45,120
140.371,-99.662,120
141.236,-97.859,120
142.068,-96.04,120
142.867,-94.207,120
143.632,-92.359,120
144.362,-90.497,120
145.057,-88.621,120
145.715,-86.733,120
146.337,-84.832,120
146.924,-82.92,120
147.472,-80.997,120
147.985,-79.064,120
148.461,-77.121,120
148.901,-75.17,120
149.306,-73.212,120
149.676,-71.246,120
150.011,-69.275,120
150.315,-67.298,120
150.586,-65.316,120
150.828,-63.331,120
151.042,-61.342,120
151.229,-59.351,120
151.393,-57.358,120
151.536,-55.363,120
151.66,-53.367,120
151.77,-51.37,120
151.867,-49.372,120
151.957,-47.374,120
152.044,-45.376,120
152.132,-43.378,120
152.211,-41.687,120,0
152.211,-41.687,0,0)";
std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {300, 0};
std::vector<double> startSpeed = {300,300};
//

