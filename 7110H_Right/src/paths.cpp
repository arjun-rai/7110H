#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
4.969,-149.37,120,0
6.968,-149.436,120
8.966,-149.501,120
10.966,-149.562,120
12.965,-149.62,120
14.964,-149.674,120
16.963,-149.723,120
18.963,-149.767,120
20.963,-149.805,120
22.962,-149.837,120
24.962,-149.86,120
26.962,-149.876,120
28.962,-149.882,120
30.962,-149.881,120
32.962,-149.872,120
34.962,-149.857,120
36.962,-149.838,120
38.962,-149.816,120
40.962,-149.794,120
42.962,-149.772,120
44.961,-149.752,120
46.961,-149.734,120
48.961,-149.719,120
50.961,-149.706,120
52.961,-149.696,120
54.961,-149.688,120
56.961,-149.683,120
58.961,-149.681,120
60.245,-149.68,120,0
60.245,-149.68,0,0
#PATH-POINTS-START Path
101.236,-149.059,120,0
103.235,-149.022,120
105.226,-148.834,120
107.197,-148.496,120
109.137,-148.013,120
111.037,-147.39,120
112.889,-146.636,120
114.687,-145.762,120
116.427,-144.776,120
118.106,-143.691,120
119.725,-142.517,120
121.282,-141.263,120
122.781,-139.938,120
124.221,-138.551,120
125.605,-137.108,120
126.937,-135.615,120
128.217,-134.079,120
129.449,-132.504,120
130.635,-130.894,120
131.776,-129.251,120
132.874,-127.58,120
133.934,-125.883,120
134.956,-124.164,120
135.939,-122.423,120
136.888,-120.662,120
137.804,-118.884,120
138.688,-117.09,120
139.539,-115.28,120
140.361,-113.457,120
141.154,-111.621,120
141.917,-109.773,120
142.654,-107.913,120
143.364,-106.043,120
144.046,-104.163,120
144.702,-102.274,120
145.333,-100.376,120
145.939,-98.47,120
146.518,-96.556,120
147.072,-94.634,120
147.6,-92.705,120
148.102,-90.769,120
148.578,-88.827,120
149.027,-86.878,120
149.447,-84.922,120
149.837,-82.961,120
150.197,-80.994,120
150.525,-79.021,120
150.815,-77.042,120
151.066,-75.058,120
151.273,-73.068,120
151.428,-71.075,120
151.523,-69.077,120
151.543,-67.698,120,0
151.543,-67.698,0,0)";
std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {100};
std::vector<double> startSpeed = {100};
//