#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
29.444,-150.048,120,0
31.444,-150.044,120
33.444,-150.031,120
35.444,-150.01,120
37.444,-149.981,120
39.443,-149.945,120
41.443,-149.901,120
43.442,-149.851,120
45.441,-149.796,120
47.441,-149.738,120
49.44,-149.68,120
51.439,-149.623,120
53.438,-149.571,120
55.438,-149.528,120
57.438,-149.495,120
59.437,-149.476,120
61.437,-149.474,120
63.437,-149.49,120
65.437,-149.526,120
67.436,-149.583,120
69.435,-149.659,120
71.432,-149.756,120
73.429,-149.871,120
75.425,-150.005,120
77.419,-150.156,120
79.412,-150.323,120
80.326,-150.405,120,0
80.326,-150.405,0,0
#PATH-POINTS-START Path
125.665,-115.624,120,0
125.713,-113.625,120
125.761,-111.625,120
125.81,-109.626,120
125.858,-107.627,120
125.906,-105.627,120
125.954,-103.628,120
126.002,-101.628,120
126.05,-99.629,120
126.099,-97.63,120
126.147,-95.63,120
126.195,-93.631,120
126.243,-91.631,120
126.291,-89.632,120
126.34,-87.632,120
126.388,-85.633,120
126.436,-83.634,120
126.484,-81.634,120
126.532,-79.635,120
126.58,-77.635,120
126.629,-75.636,120
126.677,-73.636,120
126.725,-71.637,120
126.773,-69.638,120
126.821,-67.638,120
126.87,-65.639,120
126.907,-64.075,120,0
126.907,-64.075,0,0
#PATH-POINTS-START Path
96.888,-23.29,120,0
94.891,-23.385,120
92.892,-23.466,120
90.893,-23.533,120
88.894,-23.588,120
86.895,-23.63,120
84.895,-23.658,120
82.895,-23.675,120
80.895,-23.68,120
78.895,-23.674,120
76.895,-23.657,120
74.895,-23.631,120
72.895,-23.595,120
70.896,-23.552,120
68.897,-23.501,120
66.897,-23.445,120
64.898,-23.386,120
62.899,-23.324,120
60.9,-23.263,120
58.901,-23.204,120
56.902,-23.152,120
54.902,-23.109,120
52.902,-23.081,120
50.902,-23.073,120
48.902,-23.091,120
46.903,-23.144,120
44.906,-23.244,120
42.912,-23.402,120
40.926,-23.635,120
38.953,-23.96,120
37.004,-24.408,120
35.094,-24.999,120
33.247,-25.762,120
31.495,-26.724,120
29.873,-27.892,120
28.411,-29.254,120
27.133,-30.791,120
26.033,-32.46,120
25.1,-34.229,120
24.318,-36.069,120
23.661,-37.957,120
23.11,-39.88,120
22.65,-41.826,120
22.262,-43.788,120
21.937,-45.761,120
21.667,-47.743,120
21.442,-49.73,120
21.254,-51.721,120
21.104,-53.715,120
20.982,-55.712,120
20.886,-57.709,120
20.812,-59.708,120
20.758,-61.707,120
20.722,-63.707,120
20.702,-65.707,120
20.697,-67.707,120
20.705,-69.707,120
20.724,-71.707,120
20.754,-73.706,120
20.793,-75.706,120
20.841,-77.705,120
20.896,-79.705,120
20.958,-81.704,120
21.026,-83.703,120
21.102,-85.701,120
21.182,-87.7,120
21.267,-89.698,120
21.356,-91.696,120
21.451,-93.694,120
21.549,-95.691,120
21.65,-97.689,120
21.754,-99.686,120
21.945,-103.203,120,0
21.945,-103.203,0,0)";

std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {250,150, 0};
std::vector<double> startSpeed = {300,250, 600};
//

