#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
100.201,-135.604,120,0
102.2,-135.666,120
104.2,-135.671,120
106.199,-135.615,120
108.195,-135.488,120
110.185,-135.292,120
112.166,-135.022,120
114.136,-134.674,120
116.089,-134.244,120
118.021,-133.729,120
119.928,-133.125,120
121.803,-132.431,120
123.642,-131.646,120
125.439,-130.768,120
127.188,-129.8,120
128.885,-128.742,120
130.524,-127.595,120
132.098,-126.363,120
133.608,-125.051,120
135.05,-123.665,120
136.419,-122.208,120
137.717,-120.687,120
138.944,-119.107,120
140.1,-117.476,120
141.184,-115.795,120
142.199,-114.072,120
143.149,-112.312,120
144.035,-110.519,120
144.858,-108.697,120
145.621,-106.848,120
146.328,-104.977,120
146.981,-103.087,120
147.583,-101.18,120
148.135,-99.257,120
148.64,-97.322,120
149.099,-95.376,120
149.517,-93.42,120
149.894,-91.456,120
150.233,-89.485,120
150.535,-87.508,120
150.802,-85.526,120
151.036,-83.54,120
151.238,-81.55,120
151.408,-79.557,120
151.549,-77.562,120
151.662,-75.565,120
151.748,-73.567,120
151.807,-71.568,120
151.832,-70.334,120,0
151.832,-70.334,0,0
#PATH-POINTS-START Path
155.391,-107.186,120,0
153.447,-106.719,120
151.497,-106.273,120
149.543,-105.846,120
147.586,-105.437,120
145.624,-105.047,120
143.659,-104.673,120
141.692,-104.312,120
139.723,-103.963,120
137.751,-103.628,120
135.778,-103.303,120
133.803,-102.986,120
131.827,-102.677,120
129.85,-102.375,120
127.872,-102.078,120
125.894,-101.784,120
123.915,-101.493,120
121.936,-101.204,120
119.957,-100.915,120
117.978,-100.624,120
116,-100.331,120
114.022,-100.034,120
112.045,-99.731,120
110.069,-99.422,120
108.095,-99.105,120
106.121,-98.779,120
104.15,-98.441,120
102.181,-98.091,120
100.214,-97.727,120
98.251,-97.347,120
96.291,-96.948,120
94.335,-96.532,120
92.383,-96.094,120
90.437,-95.632,120
88.497,-95.146,120
86.564,-94.633,120
84.64,-94.089,120
82.724,-93.514,120
80.819,-92.906,120
78.926,-92.26,120
77.046,-91.577,120
75.183,-90.851,120
73.337,-90.082,120
71.511,-89.267,120
69.708,-88.401,120
67.928,-87.489,120
66.18,-86.517,120
64.461,-85.495,120
62.78,-84.411,120
61.136,-83.273,120
59.536,-82.073,120
57.982,-80.815,120
56.479,-79.496,120
55.03,-78.118,120
53.637,-76.683,120
52.307,-75.189,120
51.036,-73.646,120
49.836,-72.046,120
48.697,-70.402,120
47.63,-68.71,120
46.631,-66.978,120
45.695,-65.211,120
44.833,-63.407,120
44.035,-61.573,120
43.298,-59.714,120
42.625,-57.83,120
42.017,-55.925,120
41.466,-54.003,120
40.97,-52.065,120
40.526,-50.115,120
40.134,-48.154,120
39.791,-46.184,120
39.496,-44.206,120
39.247,-42.221,120
39.039,-40.232,120
38.871,-38.239,120
38.741,-36.244,120
38.647,-34.246,120
38.585,-32.077,120,0
38.585,-32.077,0,0
#PATH-POINTS-START Path
40.005,-32.787,120,0
40.005,-30.787,120
40.005,-28.787,120
40.005,-26.787,120
40.005,-24.787,120
40.005,-22.787,120
40.005,-20.787,120
40.005,-18.787,120
40.005,-16.787,120
40.005,-14.787,120
40.005,-12.787,120
40.005,-10.787,120
40.005,-8.787,120
40.005,-6.787,120
40.005,-4.787,120
40.005,-2.787,120
40.005,-0.787,120
40.005,1.213,120
40.005,3.213,120
40.005,5.213,120
40.005,7.213,120
40.005,9.213,120
40.005,11.213,120
40.005,13.213,120
40.005,15.213,120
40.005,17.213,120
40.005,19.213,120
40.005,21.213,120
40.005,23.213,120
40.005,25.213,120
40.005,27.213,120
40.005,29.213,120
40.005,31.213,120
40.005,33.213,120
40.005,35.213,120
40.005,37.213,120
40.005,39.213,120
40.005,41.213,120
40.005,43.213,120
40.005,45.213,120
40.005,47.213,120
40.005,49.213,120
40.005,51.213,120
40.005,53.213,120
40.005,55.213,120
40.005,57.213,120
40.005,59.213,120
40.005,61.213,120
40.005,63.213,120
40.005,65.213,120
40.005,67.213,120
40.005,69.213,120
40.005,71.213,120
40.005,73.213,120
40.005,75.213,120
40.005,77.213,120
40.005,79.213,120
40.005,81.213,120
40.005,83.213,120
40.005,85.213,120
40.005,87.899,120,0
40.005,87.899,0,0
#PATH-POINTS-START Path
40.005,85.769,120,0
42.002,85.878,120
43.996,86.025,120
45.988,86.213,120
47.974,86.442,120
49.956,86.713,120
51.931,87.027,120
53.898,87.385,120
55.857,87.788,120
57.805,88.244,120
59.74,88.748,120
61.662,89.3,120
63.57,89.901,120
65.457,90.562,120
67.326,91.274,120
69.174,92.039,120
70.995,92.866,120
72.791,93.746,120
74.554,94.688,120
76.287,95.688,120
77.981,96.75,120
79.637,97.871,120
81.247,99.058,120
82.811,100.304,120
84.322,101.613,120
85.776,102.987,120
87.169,104.421,120
88.497,105.917,120
89.751,107.474,120
90.926,109.093,120
92.017,110.769,120
93.016,112.501,120
93.917,114.286,120
94.711,116.121,120
95.389,118.002,120
95.941,119.924,120
96.356,121.88,120
96.626,123.861,120
96.741,125.857,120
96.68,127.856,120
96.444,129.841,120
96.011,131.792,120
95.386,133.691,120
94.551,135.507,120
93.519,137.219,120
92.294,138.798,120
90.891,140.222,120
89.336,141.478,120
87.648,142.549,120
85.859,143.44,120
83.992,144.155,120
82.067,144.694,120
80.104,145.076,120
78.119,145.313,120
76.122,145.418,120
74.122,145.403,120,0
72.123,145.465,120
70.125,145.535,120
68.126,145.611,120
66.128,145.695,120
64.13,145.789,120
62.133,145.895,120
60.137,146.017,120
58.142,146.158,120
56.148,146.322,120
54.157,146.507,120
52.167,146.709,120
50.178,146.916,120
48.188,147.119,120
46.197,147.311,120
44.206,147.491,120
42.213,147.66,120
40.219,147.819,120
38.225,147.969,120
36.23,148.112,120
34.326,148.241,120,0
34.326,148.241,0,0
#PATH-POINTS-START Path
34.326,148.241,120,0
32.33,148.106,120
30.334,147.987,120
28.336,147.884,120
26.338,147.794,120
24.34,147.718,120
22.341,147.654,120
20.341,147.605,120
18.342,147.568,120
16.342,147.54,120
14.342,147.523,120
12.342,147.514,120
10.342,147.516,120
8.342,147.526,120
6.342,147.544,120
4.342,147.568,120
2.343,147.598,120
0.343,147.635,120
-1.657,147.677,120
-3.656,147.724,120
-5.655,147.776,120
-7.655,147.83,120
-9.654,147.889,120
-11.653,147.95,120
-13.652,148.014,120
-15.651,148.079,120
-17.65,148.145,120
-19.648,148.213,120
-21.647,148.281,120
-23.646,148.348,120
-25.645,148.415,120
-27.644,148.481,120
-29.643,148.545,120
-31.642,148.607,120
-33.641,148.666,120
-35.64,148.723,120
-37.64,148.775,120
-39.639,148.823,120
-41.639,148.867,120
-43.638,148.906,120
-45.638,148.939,120
-47.638,148.965,120
-49.638,148.984,120
-51.638,148.996,120
-53.638,148.999,120
-55.638,148.995,120
-57.638,148.981,120
-59.637,148.955,120
-61.637,148.919,120
-63.636,148.872,120
-65.636,148.813,120
-67.634,148.741,120
-69.632,148.654,120
-71.63,148.552,120
-73.626,148.434,120
-75.622,148.3,120
-77.616,148.148,120
-79.609,147.979,120
-81.6,147.79,120
-83.589,147.579,120
-85.575,147.345,120
-87.558,147.087,120
-89.538,146.806,120
-91.514,146.498,120
-93.486,146.164,120
-95.453,145.801,120
-97.414,145.407,120
-99.368,144.981,120
-101.314,144.522,120
-103.252,144.027,120
-105.18,143.495,120
-107.097,142.924,120
-109.001,142.311,120
-110.89,141.655,120
-112.763,140.954,120
-114.618,140.206,120
-116.452,139.41,120
-118.264,138.562,120
-120.05,137.663,120
-121.808,136.709,120
-123.535,135.701,120
-125.228,134.636,120
-126.884,133.515,120
-128.5,132.336,120
-130.072,131.1,120
-131.597,129.807,120
-133.073,128.458,120
-134.496,127.054,120
-135.865,125.596,120
-137.176,124.086,120
-138.428,122.527,120
-139.62,120.921,120
-140.749,119.27,120
-141.816,117.579,120
-142.82,115.85,120
-143.761,114.085,120
-144.641,112.29,120
-145.46,110.465,120
-146.219,108.615,120
-146.92,106.743,120
-147.566,104.85,120
-148.158,102.939,120
-148.692,101.012,120
-149.172,99.071,120
-149.605,97.118,120
-149.993,95.156,120
-150.337,93.187,120
-150.641,91.21,120
-150.892,89.226,120
-151.107,87.237,120
-151.288,85.246,120
-151.436,83.251,120
-151.538,81.254,120
-151.612,79.255,120
-151.661,77.256,120,0
-151.672,74.41,120
-151.672,74.41,0,0
#PATH-POINTS-START Path
-150.962,92.158,120,0
-148.962,92.135,120
-146.963,92.111,120
-144.963,92.088,120
-142.963,92.065,120
-140.963,92.041,120
-138.963,92.018,120
-136.963,91.994,120
-134.963,91.971,120
-132.964,91.948,120
-130.964,91.924,120
-128.964,91.901,120
-126.964,91.877,120
-124.964,91.854,120
-122.964,91.831,120
-120.964,91.807,120
-118.965,91.784,120
-116.965,91.76,120
-114.965,91.737,120
-112.965,91.714,120
-110.965,91.69,120
-108.965,91.667,120
-106.965,91.644,120
-104.965,91.62,120
-102.966,91.597,120
-100.966,91.573,120
-98.966,91.55,120
-96.966,91.527,120
-94.966,91.503,120
-92.966,91.48,120
-90.966,91.456,120
-88.967,91.433,120
-86.967,91.41,120
-84.967,91.386,120
-82.967,91.363,120
-80.967,91.339,120
-78.967,91.316,120
-76.967,91.293,120
-74.968,91.269,120
-72.968,91.246,120
-70.968,91.223,120
-68.968,91.199,120
-66.968,91.176,120
-64.968,91.152,120
-62.968,91.129,120
-60.968,91.106,120
-58.969,91.082,120
-56.969,91.059,120
-54.969,91.035,120
-52.969,91.012,120
-50.969,90.989,120
-48.969,90.965,120
-46.969,90.942,120
-44.97,90.918,120
-42.97,90.895,120
-40.97,90.872,120
-38.97,90.848,120
-36.97,90.825,120
-34.97,90.801,120
-32.97,90.778,120
-30.971,90.755,120
-29.567,90.738,120,0
-29.567,90.738,0,0
#PATH-POINTS-START Path
-29.567,88.609,120,0
-30.693,86.956,120
-31.801,85.29,120
-32.892,83.615,120
-33.97,81.93,120
-35.037,80.239,120
-36.095,78.541,120
-37.145,76.839,120
-38.191,75.134,120
-39.234,73.428,120
-40.277,71.721,120
-41.322,70.016,120
-42.371,68.313,120
-43.426,66.614,120
-44.489,64.92,120
-45.561,63.232,120
-46.647,61.552,120
-47.746,59.881,120
-48.862,58.221,120
-49.994,56.573,120
-51.148,54.939,120
-52.324,53.321,120
-53.522,51.72,120
-54.746,50.138,120
-55.997,48.578,120
-57.277,47.041,120
-58.587,45.53,120
-59.927,44.045,120
-61.299,42.591,120
-62.707,41.17,120
-64.148,39.783,120
-65.623,38.432,120
-67.132,37.12,120
-68.679,35.852,120
-70.259,34.627,120
-71.874,33.447,120
-73.522,32.314,120
-75.205,31.233,120
-76.918,30.201,120
-78.661,29.221,120
-80.434,28.297,120
-82.234,27.423,120
-84.059,26.606,120
-85.908,25.843,120
-87.777,25.132,120
-89.667,24.479,120
-91.574,23.875,120
-93.497,23.328,120
-95.434,22.829,120
-97.384,22.384,120
-99.343,21.985,120
-101.312,21.634,120
-103.289,21.332,120
-105.272,21.072,120
-107.261,20.857,120
-109.253,20.685,120
-111.249,20.551,120
-113.246,20.455,120
-115.245,20.399,120
-117.245,20.379,120
-119.245,20.393,120
-121.856,20.457,120,0
-121.856,20.457,0,0
#PATH-POINTS-START Path
-121.856,20.457,120,0
-119.856,20.487,120
-117.856,20.518,120
-115.856,20.548,120
-113.857,20.579,120
-111.857,20.609,120
-109.857,20.64,120
-107.857,20.67,120
-105.858,20.701,120
-103.858,20.731,120
-101.858,20.762,120
-99.858,20.793,120
-97.859,20.823,120
-95.859,20.854,120
-93.859,20.884,120
-91.859,20.915,120
-89.86,20.945,120
-87.86,20.976,120
-85.86,21.006,120
-83.86,21.037,120
-81.86,21.067,120
-79.861,21.098,120
-77.861,21.128,120
-75.861,21.159,120
-73.861,21.189,120
-71.862,21.22,120
-69.862,21.25,120
-67.862,21.281,120
-65.862,21.312,120
-63.863,21.342,120
-61.863,21.373,120
-59.863,21.403,120
-57.863,21.434,120
-55.863,21.464,120
-53.864,21.495,120
-51.864,21.525,120
-49.864,21.556,120
-47.864,21.586,120
-45.865,21.617,120
-43.865,21.647,120
-41.865,21.678,120
-39.865,21.708,120
-37.866,21.739,120
-35.866,21.77,120
-33.866,21.8,120
-31.866,21.831,120
-29.867,21.861,120
-28.857,21.877,120,0
-28.857,21.877,0,0
#PATH-POINTS-START Path
-28.147,21.877,120,0
-28.976,20.057,120
-29.825,18.246,120
-30.695,16.445,120
-31.591,14.657,120
-32.515,12.883,120
-33.471,11.126,120
-34.462,9.389,120
-35.491,7.674,120
-36.561,5.984,120
-37.675,4.324,120
-38.835,2.695,120
-40.043,1.101,120
-41.302,-0.453,120
-42.612,-1.965,120
-43.971,-3.431,120
-45.384,-4.847,120
-46.846,-6.211,120
-48.357,-7.521,120
-49.915,-8.776,120
-51.518,-9.971,120
-53.163,-11.108,120
-54.847,-12.186,120
-56.567,-13.207,120
-58.32,-14.169,120
-60.103,-15.076,120
-61.913,-15.927,120
-63.747,-16.725,120
-65.602,-17.472,120
-67.476,-18.17,120
-69.367,-18.82,120
-71.274,-19.424,120
-73.193,-19.987,120
-75.123,-20.51,120
-77.064,-20.992,120
-79.013,-21.44,120
-80.971,-21.851,120
-82.934,-22.231,120
-84.904,-22.578,120
-86.878,-22.898,120
-88.857,-23.187,120
-90.839,-23.452,120
-92.825,-23.691,120
-94.814,-23.905,120
-96.804,-24.098,120
-98.797,-24.27,120
-100.791,-24.419,120
-102.787,-24.55,120
-104.784,-24.662,120
-106.781,-24.757,120
-108.78,-24.836,120
-110.779,-24.897,120
-112.778,-24.943,120
-114.778,-24.974,120
-116.778,-24.991,120
-118.778,-24.995,120
-121.856,-24.978,120,0
-121.856,-24.978,0,0)";
std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {400, 500, 0, 600, 400, 0, 400, 0, 400};
std::vector<double> startSpeed = {500, 600, 500, 200, 600, 500, 200, 500, 200};
//