#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
100.201,-135.604,120,0
102.2,-135.666,120
104.2,-135.671,120
106.199,-135.615,120
108.195,-135.488,120
110.185,-135.292,120
112.166,-135.022,120
114.136,-134.674,120
116.089,-134.244,120
118.021,-133.729,120
119.928,-133.125,120
121.803,-132.431,120
123.642,-131.646,120
125.439,-130.768,120
127.188,-129.8,120
128.885,-128.742,120
130.524,-127.595,120
132.098,-126.363,120
133.608,-125.051,120
135.05,-123.665,120
136.419,-122.208,120
137.717,-120.687,120
138.944,-119.107,120
140.1,-117.476,120
141.184,-115.795,120
142.199,-114.072,120
143.149,-112.312,120
144.035,-110.519,120
144.858,-108.697,120
145.621,-106.848,120
146.328,-104.977,120
146.981,-103.087,120
147.583,-101.18,120
148.135,-99.257,120
148.64,-97.322,120
149.099,-95.376,120
149.517,-93.42,120
149.894,-91.456,120
150.233,-89.485,120
150.535,-87.508,120
150.802,-85.526,120
151.036,-83.54,120
151.238,-81.55,120
151.408,-79.557,120
151.549,-77.562,120
151.662,-75.565,120
151.748,-73.567,120
151.807,-71.568,120
151.832,-70.334,120,0
151.832,-70.334,0,0
#PATH-POINTS-START Path
155.391,-107.186,120,0
153.447,-106.718,120
151.498,-106.27,120
149.545,-105.84,120
147.588,-105.428,120
145.627,-105.034,120
143.663,-104.656,120
141.696,-104.292,120
139.727,-103.942,120
137.756,-103.606,120
135.782,-103.282,120
133.807,-102.968,120
131.83,-102.664,120
129.852,-102.369,120
127.873,-102.083,120
125.892,-101.802,120
123.911,-101.528,120
121.929,-101.26,120
119.947,-100.995,120
117.964,-100.732,120
115.981,-100.472,120
113.998,-100.213,120
112.015,-99.954,120
110.032,-99.693,120
108.049,-99.43,120
106.067,-99.163,120
104.086,-98.892,120
102.105,-98.615,120
100.125,-98.33,120
98.147,-98.037,120
96.17,-97.733,120
94.195,-97.418,120
92.222,-97.09,120
90.252,-96.746,120
88.285,-96.386,120
86.321,-96.008,120
84.361,-95.609,120
82.406,-95.188,120
80.457,-94.74,120
78.514,-94.266,120
76.579,-93.76,120
74.652,-93.223,120
72.737,-92.647,120
70.833,-92.035,120
68.945,-91.376,120
67.073,-90.673,120
65.22,-89.918,120
63.392,-89.108,120
61.59,-88.241,120
59.82,-87.31,120
58.088,-86.31,120
56.398,-85.241,120
54.756,-84.099,120
53.173,-82.877,120
51.655,-81.576,120
50.207,-80.197,120
48.838,-78.74,120
47.554,-77.207,120
46.366,-75.598,120
45.275,-73.922,120
44.284,-72.185,120
43.392,-70.396,120
42.607,-68.556,120
41.923,-66.678,120
41.33,-64.768,120
40.84,-62.829,120
40.433,-60.871,120
40.114,-58.897,120
39.749,-55.587,120,0
39.749,-55.587,0,0
#PATH-POINTS-START Path
39.749,-57.45,120,0
39.753,-55.45,120
39.756,-53.45,120
39.76,-51.45,120
39.763,-49.45,120
39.767,-47.45,120
39.77,-45.45,120
39.774,-43.45,120
39.777,-41.45,120
39.781,-39.45,120
39.784,-37.45,120
39.788,-35.45,120
39.791,-33.45,120
39.795,-31.45,120
39.798,-29.45,120
39.802,-27.45,120
39.805,-25.45,120
39.809,-23.45,120
39.812,-21.45,120
39.816,-19.45,120
39.819,-17.45,120
39.823,-15.45,120
39.827,-13.45,120
39.83,-11.45,120
39.834,-9.45,120
39.837,-7.45,120
39.841,-5.45,120
39.844,-3.45,120
39.848,-1.45,120
39.851,0.55,120
39.855,2.55,120
39.858,4.55,120
39.862,6.55,120
39.865,8.55,120
39.869,10.55,120
39.872,12.55,120
39.876,14.55,120
39.879,16.55,120
39.883,18.55,120
39.886,20.55,120
39.89,22.55,120
39.893,24.55,120
39.897,26.55,120
39.9,28.55,120
39.904,30.55,120
39.907,32.55,120
39.911,34.55,120
39.915,36.55,120
39.918,38.55,120
39.922,40.55,120
39.925,42.55,120
39.929,44.55,120
39.932,46.55,120
39.936,48.55,120
39.939,50.55,120
39.943,52.55,120
39.946,54.55,120
39.95,56.55,120
39.953,58.55,120
39.957,60.55,120
39.96,62.55,120
39.964,64.55,120
39.967,66.55,120
39.971,68.55,120
39.974,70.55,120
39.978,72.55,120
39.981,74.55,120
39.985,76.55,120
39.988,78.55,120
39.992,80.55,120
39.995,82.55,120
39.999,84.55,120
40.005,87.899,120,0
40.005,87.899,0,0
#PATH-POINTS-START Path
40.005,85.769,120,0
42.002,85.878,120
43.996,86.025,120
45.988,86.213,120
47.974,86.442,120
49.956,86.713,120
51.931,87.027,120
53.898,87.385,120
55.857,87.788,120
57.805,88.244,120
59.74,88.748,120
61.662,89.3,120
63.57,89.901,120
65.457,90.562,120
67.326,91.274,120
69.174,92.039,120
70.995,92.866,120
72.791,93.746,120
74.554,94.688,120
76.287,95.688,120
77.981,96.75,120
79.637,97.871,120
81.247,99.058,120
82.811,100.304,120
84.322,101.613,120
85.776,102.987,120
87.169,104.421,120
88.497,105.917,120
89.751,107.474,120
90.926,109.093,120
92.017,110.769,120
93.016,112.501,120
93.917,114.286,120
94.711,116.121,120
95.389,118.002,120
95.941,119.924,120
96.356,121.88,120
96.626,123.861,120
96.741,125.857,120
96.68,127.856,120
96.444,129.841,120
96.011,131.792,120
95.386,133.691,120
94.551,135.507,120
93.519,137.219,120
92.294,138.798,120
90.891,140.222,120
89.336,141.478,120
87.648,142.549,120
85.859,143.44,120
83.992,144.155,120
82.067,144.694,120
80.104,145.076,120
78.119,145.313,120
76.122,145.418,120
74.122,145.403,120,0
72.123,145.464,120
70.124,145.529,120
68.126,145.596,120
66.127,145.669,120
64.129,145.751,120
62.131,145.857,120
60.146,146.084,120
58.168,146.378,120
56.178,146.583,120
54.186,146.754,120
52.192,146.91,120
50.197,147.054,120
47.683,147.226,120,0
47.683,147.226,0,0
#PATH-POINTS-START Path
47.683,148.646,120,0
45.688,148.511,120
43.692,148.39,120
41.695,148.283,120
39.697,148.19,120
37.698,148.108,120
35.7,148.038,120
33.7,147.981,120
31.701,147.933,120
29.701,147.894,120
27.702,147.863,120
25.702,147.84,120
23.702,147.826,120
21.702,147.819,120
19.702,147.817,120
17.702,147.82,120
15.702,147.83,120
13.702,147.844,120
11.702,147.862,120
9.702,147.883,120
7.702,147.908,120
5.702,147.936,120
3.703,147.966,120
1.703,147.998,120
-0.297,148.033,120
-2.296,148.068,120
-4.296,148.103,120
-6.296,148.14,120
-8.295,148.176,120
-10.295,148.212,120
-12.295,148.247,120
-14.295,148.281,120
-16.294,148.314,120
-18.294,148.345,120
-20.294,148.374,120
-22.294,148.4,120
-24.293,148.424,120
-26.293,148.444,120
-28.293,148.461,120
-30.293,148.473,120
-32.293,148.482,120
-34.293,148.487,120
-36.293,148.484,120
-38.293,148.477,120
-40.293,148.465,120
-42.293,148.446,120
-44.293,148.42,120
-46.293,148.387,120
-48.292,148.348,120
-50.292,148.299,120
-52.291,148.242,120
-54.29,148.177,120
-56.288,148.103,120
-58.287,148.017,120
-60.284,147.921,120
-62.281,147.816,120
-64.278,147.701,120
-66.274,147.57,120
-68.269,147.427,120
-70.263,147.273,120
-72.256,147.106,120
-74.247,146.921,120
-76.237,146.722,120
-78.226,146.509,120
-80.213,146.28,120
-82.197,146.031,120
-84.179,145.764,120
-86.159,145.479,120
-88.136,145.176,120
-90.109,144.853,120
-92.079,144.503,120
-94.044,144.132,120
-96.005,143.739,120
-97.961,143.323,120
-99.912,142.882,120
-101.855,142.41,120
-103.791,141.909,120
-105.72,141.38,120
-107.64,140.822,120
-109.551,140.232,120
-111.452,139.61,120
-113.341,138.953,120
-115.216,138.256,120
-117.076,137.522,120
-118.921,136.75,120
-120.748,135.937,120
-122.557,135.084,120
-124.345,134.187,120
-126.109,133.247,120
-127.849,132.261,120
-129.562,131.228,120
-131.245,130.148,120
-132.895,129.018,120
-134.509,127.836,120
-136.085,126.605,120
-137.621,125.324,120
-139.114,123.993,120
-140.561,122.613,120
-141.96,121.184,120
-143.308,119.708,120
-144.604,118.184,120
-145.844,116.616,120
-147.029,115.005,120
-148.156,113.353,120
-149.224,111.663,120
-150.233,109.936,120
-151.182,108.176,120
-152.073,106.385,120
-152.896,104.563,120
-153.66,102.714,120
-154.365,100.843,120
-155.015,98.952,120
-155.609,97.043,120
-156.151,95.118,120
-156.638,93.178,120
-157.065,91.224,120
-157.444,89.261,120
-157.779,87.289,120
-158.071,85.311,120
-158.307,83.324,120
-158.501,81.334,120
-158.659,79.341,120
-158.779,77.344,120
-158.849,75.345,120
-158.89,73.346,120,0
-158.902,71.265,120
-158.902,71.265,0,0
#PATH-POINTS-START Path
-150.962,92.158,120,0
-148.962,92.135,120
-146.963,92.111,120
-144.963,92.088,120
-142.963,92.065,120
-140.963,92.041,120
-138.963,92.018,120
-136.963,91.994,120
-134.963,91.971,120
-132.964,91.948,120
-130.964,91.924,120
-128.964,91.901,120
-126.964,91.877,120
-124.964,91.854,120
-122.964,91.831,120
-120.964,91.807,120
-118.965,91.784,120
-116.965,91.76,120
-114.965,91.737,120
-112.965,91.714,120
-110.965,91.69,120
-108.965,91.667,120
-106.965,91.644,120
-104.965,91.62,120
-102.966,91.597,120
-100.966,91.573,120
-98.966,91.55,120
-96.966,91.527,120
-94.966,91.503,120
-92.966,91.48,120
-90.966,91.456,120
-88.967,91.433,120
-86.967,91.41,120
-84.967,91.386,120
-82.967,91.363,120
-80.967,91.339,120
-78.967,91.316,120
-76.967,91.293,120
-74.968,91.269,120
-72.968,91.246,120
-70.968,91.223,120
-68.968,91.199,120
-66.968,91.176,120
-64.968,91.152,120
-62.968,91.129,120
-60.968,91.106,120
-58.969,91.082,120
-56.969,91.059,120
-54.969,91.035,120
-52.969,91.012,120
-50.969,90.989,120
-48.969,90.965,120
-46.969,90.942,120
-44.97,90.918,120
-42.97,90.895,120
-40.97,90.872,120
-38.97,90.848,120
-36.97,90.825,120
-34.97,90.801,120
-32.97,90.778,120
-30.971,90.755,120
-29.567,90.738,120,0
-29.567,90.738,0,0
#PATH-POINTS-START Path
-29.567,88.609,120,0
-29.977,86.651,120
-30.32,84.681,120
-30.602,82.701,120
-30.833,80.714,120
-31.026,78.724,120
-31.191,76.731,120
-31.344,74.737,120
-31.501,72.743,120
-31.678,70.751,120
-31.894,68.762,120
-32.17,66.782,120
-32.531,64.815,120
-32.999,62.87,120
-33.594,60.962,120
-34.336,59.105,120
-35.237,57.32,120
-36.298,55.626,120
-37.515,54.04,120
-38.87,52.57,120
-40.343,51.218,120
-41.913,49.98,120
-43.565,48.854,120
-45.281,47.825,120
-47.046,46.886,120
-48.851,46.026,120
-50.691,45.24,120
-52.555,44.517,120
-54.44,43.848,120
-56.343,43.233,120
-58.259,42.66,120
-60.187,42.129,120
-62.125,41.636,120
-64.071,41.175,120
-66.024,40.743,120
-67.983,40.341,120
-69.948,39.965,120
-71.916,39.612,120
-73.888,39.279,120
-75.864,38.967,120
-77.842,38.673,120
-79.823,38.396,120
-81.805,38.135,120
-83.79,37.889,120
-85.777,37.656,120
-87.765,37.437,120
-89.754,37.231,120
-91.745,37.037,120
-93.736,36.853,120
-95.729,36.679,120
-97.722,36.514,120
-99.716,36.36,120
-101.711,36.216,120
-103.706,36.078,120
-105.701,35.947,120
-107.698,35.827,120
-109.695,35.713,120
-111.692,35.604,120
-113.689,35.504,120
-115.687,35.41,120
-117.685,35.32,120
-119.683,35.238,120
-123.595,35.091,120,0
-123.595,35.091,0,0
#PATH-POINTS-START Path
-124.116,38.393,120,0
-122.116,38.388,120
-120.116,38.376,120
-118.116,38.355,120
-116.116,38.327,120
-114.117,38.29,120
-112.117,38.248,120
-110.118,38.199,120
-108.119,38.145,120
-106.119,38.087,120
-104.12,38.026,120
-102.121,37.964,120
-100.122,37.903,120
-98.123,37.846,120
-96.124,37.795,120
-94.124,37.755,120
-92.124,37.728,120
-90.124,37.722,120
-88.124,37.74,120
-86.125,37.79,120
-84.127,37.88,120
-82.132,38.017,120
-80.141,38.21,120
-78.158,38.467,120
-76.186,38.797,120
-74.228,39.206,120
-72.29,39.698,120
-70.375,40.275,120
-68.488,40.936,120
-66.631,41.68,120
-64.807,42.5,120
-63.016,43.389,120
-61.258,44.343,120
-59.532,45.353,120
-57.836,46.413,120
-56.169,47.517,120
-54.527,48.659,120
-52.908,49.834,120
-51.312,51.039,120
-49.734,52.268,120
-48.175,53.52,120
-46.631,54.791,120
-45.101,56.079,120
-43.584,57.383,120
-42.078,58.699,120
-40.583,60.028,120
-39.097,61.366,120
-37.265,63.04,120,0
-37.265,63.04,0,0
#PATH-POINTS-START Path
-37.265,63.04,120,0
-37.318,61.04,120
-37.372,59.041,120
-37.425,57.042,120
-37.479,55.042,120
-37.533,53.043,120
-37.586,51.044,120
-37.64,49.045,120
-37.693,47.045,120
-37.747,45.046,120
-37.8,43.047,120
-37.854,41.047,120
-37.907,39.048,120
-37.961,37.049,120
-38.014,35.05,120
-38.068,33.05,120
-38.122,31.051,120
-38.175,29.052,120
-38.229,27.052,120
-38.282,25.053,120
-38.336,23.054,120
-38.389,21.055,120
-38.443,19.055,120
-38.496,17.056,120
-38.55,15.057,120
-38.604,13.057,120
-38.657,11.058,120
-38.711,9.059,120
-38.764,7.06,120
-38.818,5.06,120
-38.871,3.061,120
-38.925,1.062,120
-38.978,-0.938,120
-39.032,-2.937,120
-39.086,-4.936,120
-39.128,-6.521,120,0
-39.128,-6.521,0,0
#PATH-POINTS-START Path
-38.507,-5.9,120,0
-40.507,-5.899,120
-42.507,-5.894,120
-44.507,-5.887,120
-46.507,-5.878,120
-48.507,-5.867,120
-50.507,-5.854,120
-52.507,-5.841,120
-54.507,-5.826,120
-56.507,-5.81,120
-58.507,-5.794,120
-60.507,-5.777,120
-62.506,-5.759,120
-64.506,-5.74,120
-66.506,-5.722,120
-68.506,-5.702,120
-70.506,-5.683,120
-72.506,-5.663,120
-74.506,-5.643,120
-76.506,-5.623,120
-78.506,-5.603,120
-80.506,-5.583,120
-82.505,-5.563,120
-84.505,-5.544,120
-86.505,-5.524,120
-88.505,-5.504,120
-90.505,-5.485,120
-92.505,-5.466,120
-94.505,-5.448,120
-96.505,-5.43,120
-98.505,-5.412,120
-100.505,-5.395,120
-102.505,-5.379,120
-104.505,-5.363,120
-106.504,-5.348,120
-108.504,-5.335,120
-110.504,-5.322,120
-112.504,-5.311,120
-114.504,-5.301,120
-116.504,-5.292,120
-118.504,-5.286,120
-120.504,-5.281,120
-122.974,-5.279,120,0
-122.974,-5.279,0,0
#PATH-POINTS-START Path
-123.595,-5.279,120,0
-121.595,-5.299,120
-119.595,-5.318,120
-117.595,-5.337,120
-115.595,-5.357,120
-113.595,-5.376,120
-111.595,-5.396,120
-109.595,-5.415,120
-107.596,-5.435,120
-105.596,-5.454,120
-103.596,-5.473,120
-101.596,-5.493,120
-99.596,-5.512,120
-97.596,-5.532,120
-95.596,-5.551,120
-93.596,-5.57,120
-91.596,-5.59,120
-89.596,-5.609,120
-87.596,-5.629,120
-85.597,-5.648,120
-83.597,-5.668,120
-81.597,-5.687,120
-79.597,-5.706,120
-77.597,-5.726,120
-75.597,-5.745,120
-73.597,-5.765,120
-71.597,-5.784,120
-69.597,-5.803,120
-67.597,-5.823,120
-65.598,-5.842,120
-63.598,-5.862,120
-61.598,-5.881,120
-59.624,-5.9,120,0
-59.624,-5.9,0,0
#PATH-POINTS-START Path
-59.624,-5.279,120,0
-59.894,-7.261,120
-60.165,-9.242,120
-60.452,-11.222,120
-60.744,-13.2,120
-61.049,-15.177,120
-61.361,-17.152,120
-61.685,-19.126,120
-62.019,-21.098,120
-62.362,-23.068,120
-62.718,-25.036,120
-63.082,-27.003,120
-63.46,-28.967,120
-63.847,-30.929,120
-64.247,-32.888,120
-64.657,-34.846,120
-65.081,-36.801,120
-65.515,-38.753,120
-65.962,-40.702,120
-66.423,-42.648,120
-66.894,-44.592,120
-67.382,-46.532,120
-67.877,-48.469,120
-68.394,-50.401,120
-68.917,-52.332,120
-69.461,-54.256,120
-70.016,-56.178,120
-70.586,-58.095,120
-71.173,-60.007,120
-71.77,-61.916,120
-72.393,-63.816,120
-73.025,-65.713,120
-73.675,-67.605,120
-74.346,-69.489,120
-75.028,-71.369,120
-75.735,-73.24,120
-76.459,-75.104,120
-77.198,-76.963,120
-77.963,-78.811,120
-78.747,-80.65,120
-79.548,-82.483,120
-80.374,-84.304,120
-81.225,-86.114,120
-82.096,-87.915,120
-82.987,-89.705,120
-83.911,-91.479,120
-84.859,-93.24,120
-85.831,-94.987,120
-86.83,-96.72,120
-87.857,-98.437,120
-88.919,-100.131,120
-90.01,-101.807,120
-91.134,-103.462,120
-92.29,-105.093,120
-93.481,-106.7,120
-94.709,-108.279,120
-95.974,-109.827,120
-97.28,-111.341,120
-98.628,-112.819,120
-100.019,-114.256,120
-101.456,-115.647,120
-102.939,-116.988,120
-104.47,-118.274,120
-106.051,-119.499,120
-107.681,-120.657,120
-109.371,-121.727,120
-111.11,-122.713,120
-112.899,-123.606,120
-114.742,-124.383,120
-116.631,-125.038,120
-118.56,-125.564,120
-120.525,-125.932,120
-122.512,-126.151,120
-124.511,-126.191,120
-126.505,-126.063,120
-128.481,-125.755,120
-130.42,-125.271,120
-132.312,-124.624,120
-134.138,-123.81,120
-135.897,-122.861,120
-137.573,-121.771,120
-139.172,-120.57,120
-140.687,-119.266,120
-142.117,-117.868,120
-143.472,-116.397,120
-144.748,-114.857,120
-145.943,-113.254,120
-147.07,-111.603,120
-148.131,-109.907,120
-149.128,-108.174,120
-150.064,-106.407,120
-150.943,-104.61,120
-151.766,-102.787,120
-152.537,-100.942,120
-153.258,-99.077,120
-153.933,-97.194,120
-154.562,-95.296,120
-155.15,-93.384,120
-155.698,-91.461,120
-156.208,-89.527,120
-156.683,-87.584,120
-157.124,-85.634,120
-157.533,-83.676,120
-157.903,-81.71,120
-158.244,-79.74,120
-158.557,-77.764,120
-158.845,-75.785,120
-159.103,-73.802,120
-159.331,-71.815,120
-159.537,-69.826,120
-159.722,-67.834,120
-159.876,-65.84,120
-160.009,-63.845,120
-160.124,-61.848,120,0
-160.238,-59.313,120
-160.238,-59.313,0,0)";

std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {400, 500, 0, 600, 600, 0, 500, 0, 0, 600, 0, 500};
std::vector<double> startSpeed = {500, 600, 500, 200, 600, 500, 200, 400, 500, 600, 500, 300};
//