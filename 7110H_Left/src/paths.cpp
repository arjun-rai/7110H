#include "vex.h"
#include "paths.h"
#include "pure-pursuit.h"
std::vector<std::vector<pathPoint>> convert_to_path(std::string str)
{
    std::istringstream stream(str);
    std::string line;
    std::vector<std::vector<pathPoint>> paths;

    while (std::getline(stream, line)) {
        if (line.find("#PATH-POINTS-START Path") != std::string::npos) {
            // Start a new path for each "#PATH-POINTS-START Path"
            paths.push_back(std::vector<pathPoint>());
            continue;
        }

        std::istringstream lineStream(line);
        std::string token;

        // Skip the first two values and only consider the first two for x, y
        std::getline(lineStream, token, ','); // x
        double x = atof(token.c_str());

        std::getline(lineStream, token, ','); // y
        double y = atof(token.c_str());

        paths.back().push_back(point(x,y));
    }
    return paths;
}
const char * path_str = R"(#PATH-POINTS-START Path
-100.309,-143.061,120,0
-101.514,-141.467,120
-102.945,-140.073,120
-104.558,-138.893,120
-106.301,-137.915,120
-108.13,-137.106,120
-110.012,-136.43,120
-111.926,-135.85,120
-113.858,-135.333,120
-115.799,-134.851,120
-117.743,-134.381,120
-119.685,-133.903,120
-121.619,-133.395,120
-123.541,-132.842,120
-125.444,-132.226,120
-127.32,-131.534,120
-129.161,-130.754,120
-130.956,-129.871,120
-132.693,-128.881,120
-134.361,-127.779,120
-135.949,-126.564,120
-137.447,-125.239,120
-138.847,-123.812,120
-140.146,-122.292,120
-141.343,-120.69,120
-142.435,-119.015,120
-143.431,-117.281,120
-144.331,-115.495,120
-145.143,-113.667,120
-145.874,-111.806,120
-146.528,-109.916,120
-147.22,-107.629,120,0
-147.22,-107.629,0,0
#PATH-POINTS-START Path
-147.22,-101.141,120,0
-146.853,-103.107,120
-146.418,-105.059,120
-145.912,-106.994,120
-145.335,-108.908,120
-144.684,-110.799,120
-143.952,-112.66,120
-143.147,-114.491,120
-142.27,-116.288,120
-141.316,-118.046,120
-140.288,-119.761,120
-139.193,-121.434,120
-138.028,-123.059,120
-136.794,-124.633,120
-135.502,-126.16,120
-134.149,-127.632,120
-132.738,-129.049,120
-131.278,-130.416,120
-129.767,-131.726,120
-128.211,-132.982,120
-126.615,-134.187,120
-124.979,-135.338,120
-123.308,-136.436,120
-121.606,-137.486,120
-119.874,-138.486,120
-118.114,-139.435,120
-116.33,-140.341,120
-114.526,-141.203,120
-112.7,-142.018,120
-110.855,-142.792,120
-108.995,-143.527,120
-107.121,-144.224,120
-105.231,-144.88,120
-103.33,-145.5,120
-101.418,-146.087,120
-99.497,-146.642,120
-97.566,-147.162,120
-95.626,-147.65,120
-93.68,-148.109,120
-91.727,-148.54,120
-89.768,-148.944,120
-87.803,-149.318,120
-85.834,-149.667,120
-83.86,-149.991,120
-81.883,-150.291,120
-79.902,-150.569,120
-77.918,-150.821,120
-75.932,-151.051,120
-73.943,-151.261,120
-71.952,-151.45,120
-69.959,-151.62,120
-67.964,-151.768,120
-65.969,-151.897,120
-63.972,-152.008,120
-61.974,-152.101,120
-59.975,-152.176,120
-57.976,-152.233,120
-55.977,-152.273,120
-53.977,-152.298,120
-51.977,-152.305,120
-49.977,-152.295,120
-47.977,-152.271,120
-45.977,-152.231,120
-43.978,-152.175,120
-41.979,-152.104,120
-39.981,-152.018,120
-37.984,-151.917,120
-35.987,-151.802,120
-33.991,-151.67,120
-31.997,-151.525,120
-30.003,-151.363,120
-28.011,-151.187,120
-26.02,-150.995,120
-24.031,-150.787,120
-22.044,-150.564,120
-20.058,-150.322,120
-17.966,-150.048,120,0
-17.966,-150.048,0,0)";
std::vector<std::vector<pathPoint>> pathMain = convert_to_path(path_str);
std::vector<double> finSpeed = {0, 0};
std::vector<double> startSpeed = {100, 100};
//

